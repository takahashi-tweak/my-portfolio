# JavaScript Auto Battle Game

## 概要
JavaScriptの学習成果として制作した、オートバトル形式のブラウザゲームです。

フレームワークは使用せず、以下の理解を目的に設計・実装しました：

- DOM操作
- 状態管理
- 非同期処理（async / await）
- スキルロジック設計

---

## 使用技術
- HTML / CSS
- JavaScript
- Promise / async / await
- Drag & Drop API

---

## ゲーム構成

### 購入フェーズ
- モンスターの購入
- モンスターの売却
- ドラッグ＆ドロップ編成
- 同じモンスターを3体集めると進化
- 商品のロック機能
- レベルアップで強いモンスターの出現制御

### 戦闘フェーズ
- 非同期処理によるターン制オートバトル
- スピード（SPD）順ソートによる行動順決定
- スキル処理（回復・ターゲット変更・範囲攻撃・能力強化など）
- 勝敗判定
- ゲームクリア / ゲームオーバー判定

---

## 操作方法
- 商品からモンスターを手持ちにドラッグ＆ドロップして購入
- 手持ちからモンスターを編成にドラッグ＆ドロップして編成
- 不要になったモンスターを手持ちまたは編成から商品にドラッグ＆ドロップして売却
- 右下の「戦闘開始」ボタンを押すと自動で戦闘が開始

---

## 設計・実装の工夫

1. **ゲーム状態の一元管理**  
   ゲーム進行に関わる値をオブジェクトで管理。
   `let gameState={
    money:4,
    goodsLevel:1,
    goodsLevelUpCost:5,
    goodsListLimit:3,
    life:20,
    buyTurnCount:0,
    keepBattle:true
   }`
   でゲーム進行に関わる値をオブジェクトで管理しています。
   状態変更後は `updateGameState()` を通してUIへ反映し、状態管理と表示更新の責務を分離。

3. **戦闘ロジックのデータ化**  
   戦闘開始時にDOMから独立した戦闘用データを生成することで：
   - DOM依存の回避
   - ロジックの明確化
   - 戦闘中の値変更の安全性確保

4. **async / await によるターン制御**  
   戦闘演出とロジックを同期的に見せるため、非同期処理でターン進行を制御。
   - 処理の可読性向上
   - 戦闘テンポの制御

5. **スキル設計**  
   スキルは効果別に関数を分離し、拡張しやすい設計に。

---

## データ構造
- `monster_data`：モンスター定義  
- `enemy_data`：ターンごとの敵編成  
- `fieldMonsters`：戦闘中のモンスター情報  

---

## 戦闘フロー
1. 戦闘開始
2. 戦闘用データ生成
3. SPD順ソート
4. 攻撃ターゲット決定
5. 1体ずつ攻撃
6. 回復処理
7. 勝敗判定
8. 購入フェーズへ移動 or ゲームクリア / ゲームオーバー

---

## 制作目的
- JavaScriptの基礎理解の定着
- 状態管理とロジック設計の実践
- 非同期処理を用いたゲーム進行制御の実装
- フレームワークに依存しない設計力の向上

---

## 工夫した点
- 戦闘ロジックをDOMから分離しデータで管理
- ドラッグ＆ドロップ操作によるモンスターの購入・編成・売却を実装
- async / await によるターン進行制御
- スキル効果を関数単位で分離し拡張性を確保

---

## 苦労した点
- ドラッグ＆ドロップ操作
- 複数スキルが同時に発動する際の処理順
- 戦闘ロジックとDOM更新の責務分離

---

## 今後の改善点
- 状態管理とDOM操作の分離（MVC化）
- コードの分割
- スキル処理の整理
